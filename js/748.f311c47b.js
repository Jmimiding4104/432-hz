"use strict";(self["webpackChunk_432_hz"]=self["webpackChunk_432_hz"]||[]).push([[748],{7748:function(a,e,s){s.r(e),s.d(e,{default:function(){return H}});var l=s(6252),t=s(3577),i=s(9963);const r={class:"cart-wrap"},o={class:"cart-link"},d=(0,l.Uk)("首頁"),c=(0,l._)("p",null,"> 購物車",-1),n=(0,l.uE)('<div class="cart-line"><i class="bi bi-bag"></i><div class="cart-line-space"></div><i class="bi bi-pencil"></i><div class="cart-line-space" style="border-bottom:5px solid rgb(197, 224, 96);"></div><i class="bi bi-check-all" style="background-color:rgb(197, 224, 96);"></i></div>',1),m={class:"order-fillin-view"},u={class:"fillin-form"},p=(0,l._)("div",{class:"fillin-form-title"},"填寫聯絡與寄送資料",-1),f={class:"mb-3"},h=(0,l._)("label",{for:"email",class:"form-label"},"Email",-1),v={class:"mb-3"},_=(0,l._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),b={class:"mb-3"},g=(0,l._)("label",{for:"phone",class:"form-label"},"收件人手機",-1),k={class:"mb-3"},w=(0,l._)("label",{for:"address",class:"form-label"},"收件人地址",-1),y={class:"mb-3"},D=(0,l._)("label",{for:"message",class:"form-label"},"留言",-1),V={class:"fillin-products"},z=(0,l._)("h3",null,[(0,l._)("i",{class:"bi bi-check2-circle"}),(0,l.Uk)("我的選擇")],-1),W={class:"fillin-products-border"},$={class:"order-item-descript"},x={class:"order-item-descript-1"},U={class:"order-item-descript-2"},C={class:"cart-products-list-total-price"},I={key:0,class:"cart-products-list-price"},L={class:"cart-products-list-total"},M={key:1,class:"cart-products-list-sale-price"},q={class:"cart-products-list-total"},N={class:"cart-products-list-final_total"},T=(0,l._)("br",null,null,-1),E={class:"payorder-next"};function P(a,e,s,P,S,j){const F=(0,l.up)("IsLoading"),H=(0,l.up)("router-link"),O=(0,l.up)("VField"),Y=(0,l.up)("error-message"),K=(0,l.up)("VForm");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(F,{style:{"z-index":"1000"},active:S.isLoading},null,8,["active"]),(0,l._)("div",r,[(0,l._)("div",o,[(0,l.Wm)(H,{class:"nav-link",id:"link",to:"/"},{default:(0,l.w5)((()=>[d])),_:1}),c]),n,(0,l._)("div",m,[(0,l._)("div",u,[p,(0,l.Wm)(K,{class:"fillin-form-container",ref:"form"},{default:(0,l.w5)((({errors:a})=>[(0,l._)("div",f,[h,(0,l.Wm)(O,{id:"email",name:"email",type:"email",class:(0,t.C_)(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:S.form.user.email,"onUpdate:modelValue":e[0]||(e[0]=a=>S.form.user.email=a)},null,8,["class","modelValue"]),(0,l.Wm)(Y,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",v,[_,(0,l.Wm)(O,{id:"name",name:"姓名",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:S.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=a=>S.form.user.name=a)},null,8,["class","modelValue"]),(0,l.Wm)(Y,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",b,[g,(0,l.Wm)(O,{id:"phone",name:"手機",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":a["手機"]}]),placeholder:"請輸入手機",rules:j.isPhone,modelValue:S.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=a=>S.form.user.tel=a)},null,8,["class","rules","modelValue"]),(0,l.Wm)(Y,{name:"手機",class:"invalid-feedback"})]),(0,l._)("div",k,[w,(0,l.Wm)(O,{id:"address",name:"地址",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:S.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=a=>S.form.user.address=a)},null,8,["class","modelValue"]),(0,l.Wm)(Y,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",y,[D,(0,l.wy)((0,l._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[4]||(e[4]=a=>S.form.message=a)},null,512),[[i.nr,S.form.message]])])])),_:1},512)]),(0,l._)("div",V,[z,(0,l._)("div",W,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(S.cartData.carts,(a=>((0,l.wg)(),(0,l.iD)("div",{class:"order-item",key:a.id},[(0,l._)("div",{class:"order-img order-img-rwd534-del",style:(0,t.j5)({backgroundImage:`url(${a.product.imageUrl})`})},null,4),(0,l._)("div",$,[(0,l._)("div",x,[(0,l._)("p",null,(0,t.zw)(a.product.title),1)]),(0,l._)("div",U,[(0,l._)("p",null,"x"+(0,t.zw)(a.qty)+(0,t.zw)(a.product.unit),1),(0,l._)("p",null,"$"+(0,t.zw)(a.total),1)])])])))),128)),(0,l._)("div",C,[S.cartData.total===S.cartData.final_total?((0,l.wg)(),(0,l.iD)("div",I,[(0,l._)("div",L,"總金額 NT"+(0,t.zw)(S.cartData.total),1)])):((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",q,"原金額 NT"+(0,t.zw)(S.cartData.total),1),(0,l._)("div",N,[(0,l.Uk)(" 捐贈金額 NT"+(0,t.zw)(parseInt(S.cartData.final_total)-S.cartData.total)+" ",1),T,(0,l.Uk)(" 總合金額 NT"+(0,t.zw)(parseInt(S.cartData.final_total)),1)])]))])])])]),(0,l._)("div",E,[(0,l._)("button",{type:"submit",class:"btn btn-outline-primary",onClick:e[5]||(e[5]=(0,i.iM)((a=>this.$router.push("/Products")),["prevent"]))}," 繼續購物 "),(0,l._)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=(0,i.iM)((a=>j.sendOrder()),["prevent"]))}," 結帳 ")])])],64)}var S={data(){return{isLoading:!1,cartData:"",orderId:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},is_paid:""}},inject:["emitter"],methods:{getData(){this.isLoading=!0;const a="https://vue3-course-api.hexschool.io/v2/api/daikai4104/cart";this.$http.get(a).then((a=>{this.cartData=a.data.data,this.isLoading=!1})).catch((a=>{this.$httpMessageState(a.response,"取得資料"),this.isLoading=!1}))},isPhone(a){const e=/^(09)[0-9]{8}$/;return!!e.test(a)||"需要正確的電話號碼"},sendOrder(){const a="https://vue3-course-api.hexschool.io/v2/api/daikai4104/order",e={user:this.form.user,message:this.form.message};this.$http.post(a,{data:e}).then((a=>{this.orderId=a.data.orderId,this.$httpMessageState(a,"訂單建立"),this.$router.push(`/Complete/${this.orderId}`),this.emitter.emit("get-cart")})).catch((a=>{this.$httpMessageState(a.response,"訂單建立")}))}},mounted(){this.getData()}},j=s(3744);const F=(0,j.Z)(S,[["render",P]]);var H=F}}]);
//# sourceMappingURL=748.f311c47b.js.map