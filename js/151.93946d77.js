"use strict";(self["webpackChunk_432_hz"]=self["webpackChunk_432_hz"]||[]).push([[151],{4151:function(t,s,a){a.r(s),a.d(s,{default:function(){return K}});var i=a(6252),e=a(3577),o=a(9963);const c={class:"cart-wrap"},l={class:"cart-link"},n=(0,i.Uk)("首頁"),r=(0,i._)("p",null,"> 購物車",-1),d=(0,i.uE)('<div class="cart-line"><i class="bi bi-bag"></i><div class="cart-line-space" style="border-bottom:5px solid rgb(197, 224, 96);"></div><i class="bi bi-pencil" style="background-color:rgb(197, 224, 96);"></i><div class="cart-line-space" style="border-bottom:5px solid rgb(197, 224, 96);"></div><i class="bi bi-check-all" style="background-color:rgb(197, 224, 96);"></i></div>',1),u={key:0,class:"cart-products"},p={class:"cart-products-list"},h=(0,i._)("thead",null,[(0,i._)("tr",{class:"cart-products-list-title"},[(0,i._)("th",{style:{width:"240px"},class:"cart-products-list-title-rwd-none"}),(0,i._)("th",{style:{width:"240px","text-align":"left"}},"名稱"),(0,i._)("th",{style:{width:"240px"}},"數量"),(0,i._)("th",{style:{width:"240px"}},"金額"),(0,i._)("th",{style:{width:"100px"}})])],-1),g={style:{width:"60px"},class:"cart-products-list-title-rwd-none"},b={style:{width:"240px"}},_={class:"cart-products-list-num input-group"},y=["onClick"],v=["onClick"],k={class:"cart-products-list-content-money"},w=["onClick"],m={key:0,class:"cart-products-list-price"},C={class:"cart-products-list-total"},L={key:1,class:"cart-products-list-sale-price"},$={class:"cart-products-list-total"},x={class:"cart-products-list-final_total"},D={class:"cart-products-list-coupon"},f={class:"cart-btn"},M={type:"button",class:"btn btn-primary cart-btn-go"},S=(0,i._)("span",null,"繼續選物",-1),z={type:"button",class:"btn btn-primary cart-btn-go"},W=(0,i._)("span",null,"下一步",-1),q=(0,i._)("i",{class:"bi bi-arrow-right-circle"},null,-1),N={key:1,class:"cart-products"},P={class:"cart-products-list"},T={class:"cart-no-products-list"},I=(0,i._)("p",null,"購物車尚無物品，請前往活動與產品頁面選購。",-1),O={type:"button",class:"btn btn-primary cart-btn-go"},U=(0,i._)("span",null,"繼續選物",-1);function j(t,s,a,j,H,Y){const E=(0,i.up)("IsLoading"),K=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(E,{style:{"z-index":"1000"},active:H.isLoading},null,8,["active"]),(0,i._)("div",c,[(0,i._)("div",l,[(0,i.Wm)(K,{class:"nav-link",id:"link",to:"/"},{default:(0,i.w5)((()=>[n])),_:1}),r]),d,0!=H.carts.carts?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",p,[(0,i._)("table",null,[h,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(H.carts.carts,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:"cart-products-list-content"},[(0,i._)("td",g,[(0,i._)("div",{class:"cart-products-list-content-img",style:(0,e.j5)({backgroundImage:`url(${t.product.imageUrl})`})},null,4)]),(0,i._)("td",b,(0,e.zw)(t.product.title),1),(0,i._)("td",null,[(0,i._)("div",_,[(0,i._)("button",{class:"btn btn-outline-primary cart-products-list-num-button-minus",type:"button",onClick:s=>Y.updataCart(t.id,t.qty-1)}," - ",8,y),(0,i._)("span",null,(0,e.zw)(t.qty),1),(0,i._)("button",{class:"btn btn-outline-primary cart-products-list-num-button-plus",type:"button",onClick:s=>Y.updataCart(t.id,t.qty+1)}," + ",8,v)])]),(0,i._)("td",k," NT $ "+(0,e.zw)(t.total),1),(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:s=>Y.delCartProduct(t.id)}," x ",8,w)])])))),128))])]),H.carts.total===H.carts.final_total?((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("div",C,"總金額 NT"+(0,e.zw)(H.carts.total),1)])):((0,i.wg)(),(0,i.iD)("div",L,[(0,i._)("div",$,"原金額 NT"+(0,e.zw)(H.carts.total),1),(0,i._)("div",x," 原金額+捐款 NT"+(0,e.zw)(parseInt(this.carts.final_total)),1)])),(0,i._)("div",D,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"donate10","onUpdate:modelValue":s[0]||(s[0]=t=>H.code=t)},null,512),[[o.nr,H.code]]),H.carts.total===H.carts.final_total?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:s[1]||(s[1]=t=>Y.useCoupon(H.code))}," 使用捐贈券 ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-outline-primary",onClick:s[2]||(s[2]=t=>Y.useOriginalCoupon())}," 恢復原價 "))])]),(0,i._)("div",f,[(0,i._)("button",M,[(0,i.Wm)(K,{to:"/Products"},{default:(0,i.w5)((()=>[S])),_:1})]),(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:s[3]||(s[3]=t=>Y.delCarts())}," 清除表單 "),(0,i._)("button",z,[(0,i.Wm)(K,{to:"/Order"},{default:(0,i.w5)((()=>[W,q])),_:1})])])])):((0,i.wg)(),(0,i.iD)("div",N,[(0,i._)("div",P,[(0,i._)("div",T,[I,(0,i._)("button",O,[(0,i.Wm)(K,{to:"/Products"},{default:(0,i.w5)((()=>[U])),_:1})])])])]))])],64)}var H={data(){return{isLoading:!1,carts:"",code:""}},inject:["emitter"],methods:{getData(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/daikai4104/cart";this.$http.get(t).then((t=>{this.carts=t.data.data,this.isLoading=!1}))},updataCart(t,s){this.isLoading=!0;const a=`https://vue3-course-api.hexschool.io/v2/api/daikai4104/cart/${t}`,i={product_id:t,qty:s};this.$http.put(a,{data:i}).then((t=>{this.getData(),this.$httpMessageState(t,"更新購物車"),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"更新購物車"),this.isLoading=!1}))},delCartProduct(t){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/v2/api/daikai4104/cart/${t}`;this.$http.delete(s).then((t=>{this.$httpMessageState(t,"刪除物品"),this.getData(),this.emitter.emit("get-cart"),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"刪除物品"),this.isLoading=!1}))},useCoupon(t){this.isLoading=!0;const s="https://vue3-course-api.hexschool.io/v2/api/daikai4104/coupon",a={code:t};this.$http.post(s,{data:a}).then((t=>{this.getData(),this.$httpMessageState(t,"使用捐贈券"),this.isLoading=!1})).catch((t=>{this.isLoading=!1,console.log(t),this.$httpMessageState(t.response,"使用捐贈券")}))},delCarts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/daikai4104/carts";this.$http.delete(t).then((t=>{this.getData(),this.emitter.emit("get-cart"),this.$httpMessageState(t,"清空購物車"),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"清空購物車"),this.isLoading=!1}))},useOriginalCoupon(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/daikai4104/coupon",s={code:"original"};this.$http.post(t,{data:s}).then((t=>{this.getData(),this.$httpMessageState(t,"恢復原價"),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"恢復原價"),this.isLoading=!1}))}},mounted(){this.getData(),this.emitter.on("get-cart",(()=>this.getData()))}},Y=a(3744);const E=(0,Y.Z)(H,[["render",j]]);var K=E}}]);
//# sourceMappingURL=151.93946d77.js.map