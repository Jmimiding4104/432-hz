"use strict";(self["webpackChunk_432_hz"]=self["webpackChunk_432_hz"]||[]).push([[18],{7903:function(a,s,t){t.d(s,{Z:function(){return l}});var o=t(7244),n={data(){return{modal:""}},methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new o.u_(this.$refs.modal)}};const e=n;var l=e},8018:function(a,s,t){t.r(s),t.d(s,{default:function(){return F}});var o=t(6252);function n(a,s,t,n,e,l){const i=(0,o.up)("DashboardNavbar"),d=(0,o.up)("ToastsMessage"),c=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(i),(0,o.Wm)(d),e.checksuccess?((0,o.wg)(),(0,o.j4)(c,{key:0})):(0,o.kq)("",!0)],64)}var e=t(6949);const l={class:"dashboard-navbar"},i={class:"navbar navbar-expand-lg navbar-dark bg-primary"},d={class:"container-fluid"},c={class:"navbar-logo"},r=(0,o._)("img",{style:{height:"100%"},src:e},null,-1),u=(0,o._)("span",null,"後台",-1),h=(0,o._)("span",{class:"navbar-toggler-icon"},null,-1),m=[h],v={class:"collapse navbar-collapse navbar-list-rwd-991",ref:"collapse"},p={class:"navbar-nav mb-2 mb-lg-0"},b={class:"nav-item"},g=(0,o.Uk)(" 產品管理 "),_={class:"nav-item"},k=(0,o.Uk)(" 訂單管理 "),f={class:"nav-item"},M=(0,o.Uk)(" 優惠券管理 "),w={class:"nav-item"},$=(0,o.Uk)(" 登出 "),y=(0,o._)("i",{class:"bi bi-door-closed"},null,-1),L=[$,y];function C(a,s,t,n,e,h){const $=(0,o.up)("router-link"),y=(0,o.up)("LogoutModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[(0,o._)("nav",i,[(0,o._)("div",d,[(0,o._)("div",c,[(0,o.Wm)($,{class:"navbar-brand",to:"/"},{default:(0,o.w5)((()=>[r,u])),_:1})]),(0,o._)("button",{class:"navbar-toggler",type:"button",onClick:s[0]||(s[0]=s=>a.toggleNavHam())},m),(0,o._)("div",v,[(0,o._)("ul",p,[(0,o._)("li",b,[(0,o.Wm)($,{class:"nav-link",id:"link",to:"/admin/AdminProducts",onClick:s[1]||(s[1]=s=>a.closeNavHam())},{default:(0,o.w5)((()=>[g])),_:1})]),(0,o._)("li",_,[(0,o.Wm)($,{class:"nav-link",id:"link",to:"/admin/AdminOrder",onClick:s[2]||(s[2]=s=>a.closeNavHam())},{default:(0,o.w5)((()=>[k])),_:1})]),(0,o._)("li",f,[(0,o.Wm)($,{class:"nav-link",to:"/admin/AdminCouple",onClick:s[3]||(s[3]=s=>a.closeNavHam())},{default:(0,o.w5)((()=>[M])),_:1})]),(0,o._)("li",w,[(0,o._)("div",{type:"button",class:"dashboard-navbar-logout-btn",onClick:s[4]||(s[4]=a=>h.openModal())},L)])])],512)])])]),(0,o.Wm)(y,{ref:"LogoutModal"},null,512)],64)}const x={ref:"modal",class:"modal fade",tabindex:"-1","aria-hidden":"true"},W={class:"modal-dialog"},H={class:"modal-content border-0"},N=(0,o._)("div",{class:"modal-header bg-primary text-white"},[(0,o._)("h5",{id:"delProductModalLabel",class:"modal-title"},[(0,o._)("span",null,"正在登出後台")]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Z=(0,o._)("div",{class:"modal-body"}," 登出後台並導向首頁。 ",-1),D={class:"modal-footer"},z=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function A(a,s,t,n,e,l){const i=(0,o.up)("IsLoading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(i,{style:{"z-index":"1000"},active:e.isLoading},null,8,["active"]),(0,o._)("div",x,[(0,o._)("div",W,[(0,o._)("div",H,[N,Z,(0,o._)("div",D,[z,(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:s[0]||(s[0]=a=>l.logOut())}," 登出 ")])])])],512)],64)}var S=t(7903),U={mixins:[S.Z],data(){return{isLoading:!1}},methods:{logOut(){this.isLoading=!0,this.$http.post("https://vue3-course-api.hexschool.io/v2/logout").then((a=>{this.hideModal(),this.$httpMessageState(a,"登出"),this.$router.push("/"),this.isLoading=!1})).catch((a=>{this.isLoading=!1,this.$httpMessageState(a.response,"登出")}))}}},O=t(3744);const Y=(0,O.Z)(U,[["render",A]]);var P=Y,T=t(1167),j={mixins:[T.Z],components:{LogoutModal:P},methods:{openModal(){this.$refs.LogoutModal.openModal()}}};const q=(0,O.Z)(j,[["render",C]]);var I=q,B={data(){return{checksuccess:!1}},components:{DashboardNavbar:I},methods:{checkLogin(){const a="https://vue3-course-api.hexschool.io/v2/api/user/check",s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s,this.$http.post(a).then((a=>{this.checksuccess=!0,this.$httpMessageState(a,"登入")})).catch((a=>{this.$router.push("/login"),this.$httpMessageState(a.response,"登入")}))}},mounted(){this.checkLogin()}};const E=(0,O.Z)(B,[["render",n]]);var F=E}}]);
//# sourceMappingURL=18.441415f5.js.map