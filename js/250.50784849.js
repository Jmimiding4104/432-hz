"use strict";(self["webpackChunk_432_hz"]=self["webpackChunk_432_hz"]||[]).push([[250],{8250:function(t,i,a){a.r(i),a.d(i,{default:function(){return H}});var e=a(6252),o=a(3577);const s=(0,e._)("div",{class:"products-img"},[(0,e._)("div",{class:"producrs-title"},[(0,e._)("h2",null,"活動與商品")])],-1),l={class:"products-wrap"},r={class:"products-link"},c=(0,e.Uk)("首頁"),n=(0,e._)("p",null,"> 活動與商品",-1),d={class:"btn-group products-category",role:"group","aria-label":"Basic radio toggle button group"},u=(0,e._)("label",{class:"btn btn-outline-primary",for:"all"},"全部",-1),p=(0,e._)("label",{class:"btn btn-outline-primary",for:"host"},"活動",-1),h=(0,e._)("label",{class:"btn btn-outline-primary",for:"tableware"},"餐具",-1),g=(0,e._)("label",{class:"btn btn-outline-primary",for:"donate"},"捐贈",-1),b=(0,e._)("label",{class:"btn btn-outline-primary",for:"join"},"招募",-1),v={class:"row row-cols-xs-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4"},m={class:"card",style:{width:"18rem"}},f=["onClick"],_=(0,e._)("i",{class:"bi bi-heart-fill"},null,-1),k=[_],y=["onClick"],w=(0,e._)("i",{class:"bi bi-heart"},null,-1),C=[w],D=(0,e._)("i",{class:"bi bi-search"},null,-1),x={class:"card-body"},S={class:"card-body-text"},L={class:"card-title"},$={class:"card-description"},I={class:"card-text"},j={class:"card-body-btn"},z=["onClick"],F=(0,e._)("i",{class:"bi bi-bag-plus"},null,-1),J=[F];function M(t,i,a,_,w,F){const M=(0,e.up)("IsLoading"),N=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(M,{style:{"z-index":"1000"},active:w.isLoading},null,8,["active"]),s,(0,e._)("div",l,[(0,e._)("div",r,[(0,e.Wm)(N,{class:"nav-link",id:"link",to:"/"},{default:(0,e.w5)((()=>[c])),_:1}),n]),(0,e._)("div",d,[(0,e._)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"all",autocomplete:"off",onClick:i[0]||(i[0]=t=>F.getData()),checked:""}),u,(0,e._)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"host",autocomplete:"off",onClick:i[1]||(i[1]=t=>F.getData("淨化活動"))}),p,(0,e._)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"tableware",autocomplete:"off",onClick:i[2]||(i[2]=t=>F.getData("環保餐具"))}),h,(0,e._)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"donate",autocomplete:"off",onClick:i[3]||(i[3]=t=>F.getData("捐贈"))}),g,(0,e._)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"join",autocomplete:"off",onClick:i[4]||(i[4]=t=>F.getData("加入我們"))}),b]),(0,e._)("div",v,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(w.products,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"col",key:t.id},[(0,e._)("div",m,[w.favorite.includes(t.id)?((0,e.wg)(),(0,e.iD)("div",{key:0,class:"product-img-favorite",onClick:i=>F.toggleFavorite(t.id)},k,8,f)):((0,e.wg)(),(0,e.iD)("div",{key:1,class:"product-img-favorite-join",onClick:i=>F.toggleFavorite(t.id)},C,8,y)),(0,e._)("div",{class:"card-img-top product-img",style:(0,o.j5)({backgroundImage:`url(${t.imageUrl})`})},[(0,e.Wm)(N,{class:"product-img-router-link",to:`/Product/${t.id}`},{default:(0,e.w5)((()=>[D])),_:2},1032,["to"])],4),(0,e._)("div",x,[(0,e._)("div",S,[(0,e._)("h5",L,(0,o.zw)(t.title),1),(0,e._)("div",$,[(0,e._)("p",I,(0,o.zw)(t.description),1)])]),(0,e._)("div",j,[(0,e._)("button",{type:"button",class:"btn btn-primary",title:"加入購物車",onClick:i=>F.addToCart(t.id)},J,8,z)])])])])))),128))])])],64)}var N={data(){return{isLoading:!1,products:[],favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},inject:["emitter"],methods:{getData(t){this.isLoading=!0;let i="https://vue3-course-api.hexschool.io/v2/api/daikai4104/products/all";t&&(i=`https://vue3-course-api.hexschool.io/v2/api/daikai4104/products?category=${t}`),this.$http.get(i).then((t=>{this.products=t.data.products,this.favorite=JSON.parse(localStorage.getItem("favorite"))||[],this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"載入資料")}))},addToCart(t,i=1){this.isLoading=!0;const a={product_id:t,qty:i},e="https://vue3-course-api.hexschool.io/v2/api/daikai4104/cart";this.$http.post(e,{data:a}).then((t=>{this.emitter.emit("get-cart"),this.$httpMessageState(t,"加入購物車"),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"加入購物車"),this.isLoading=!1}))},toggleFavorite(t){const i=this.favorite.findIndex((i=>i===t));-1===i?this.favorite.push(t):this.favorite.splice(i,1),this.emitter.emit("getFavorite")}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}},mounted(){this.getData(),this.emitter.on("getFavoriteProducts",(()=>this.getData()))}},O=a(3744);const W=(0,O.Z)(N,[["render",M]]);var H=W}}]);
//# sourceMappingURL=250.50784849.js.map